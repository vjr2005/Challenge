# Prompt Phase 6 — Adapt CI pipelines

## Input

The project's current CI files (GitHub Actions workflows, Jenkinsfile, bitrise.yml, etc.) and the `.mise.toml`.

## Reference project

Use the CI workflows from [Challenge](https://github.com/vjr2005/Challenge) (`.github/workflows/`, `.github/actions/`) as a reference for how to integrate Tuist + mise in GitHub Actions pipelines.

## Task

Adapt EACH existing pipeline to work with Tuist:

### Required changes in each pipeline:
1. Add a mise installation step (before any build):
   - GitHub Actions: use `jdx/mise-action@v2`
   - Other CI: `curl https://mise.jdx.dev/install.sh | sh` + `export PATH="$HOME/.local/bin:$PATH"`
2. Add a `mise install` step (installs tuist + swiftlint + other tools)
3. Add a project generation step: `mise x -- tuist install && mise x -- tuist generate`
4. Update workspace and scheme names to the new ones (e.g., AppName.xcworkspace → AppName-Tuist.xcworkspace during migration)
5. Add directory caching to speed up runs:
   - ~/.local/share/mise (installed tools)
   - ~/Library/Caches/tuist (package resolution)
   Cache key: hash of .mise.toml + Tuist/Package.swift
6. If there is a quality gate job (SwiftLint, Periphery), ensure it uses `mise x -- swiftlint` and `mise x -- periphery` instead of global invocations

### Verifications:
- The pipeline must fail if `tuist generate` fails (set -e or equivalent)
- Test steps must use the correct scheme names
- If there is a separate UI tests job, it must also generate the project

## Format
Generate each pipeline file completely, ready to replace. Mark with `# TUIST: ...` comments each new or modified line.
