---
name: project-structure
description: Project organization and directory structure. Use when creating features, organizing files, or understanding the codebase layout.
---

# Skill: Project Structure

Guide for project organization and directory structure.

## When to use this skill

- Create a new feature module
- Organize files correctly
- Understand the codebase layout
- Add extensions to existing types

---

## Project Overview

```
{AppName}/
├── App/
│   ├── Sources/
│   │   ├── {AppName}App.swift        # Minimal entry point
│   │   ├── AppContainer.swift        # Composition Root (centralized DI)
│   │   ├── Presentation/
│   │   │   └── Views/
│   │   │       └── RootView.swift    # Root navigation view
│   │   └── Resources/
│   │       └── Assets.xcassets/
│   ├── Tests/
│   └── E2ETests/
├── Features/
│   ├── {Feature}/
│   └── Home/
├── Libraries/
│   ├── Core/
│   ├── Networking/
│   └── DesignSystem/
├── Shared/
│   └── Common/
├── Derived/                          # Generated by Tuist (gitignored)
│   └── InfoPlists/
├── Tuist/
│   └── ProjectDescriptionHelpers/
├── Project.swift
├── Tuist.swift
└── CLAUDE.md
```

---

## Feature Naming

Feature directory names must **not** contain the word "Feature". Use simple, descriptive names:

```
// RIGHT
Features/User/
Features/Character/
Features/Home/

// WRONG
Features/UserFeature/
Features/CharacterFeature/
```

---

## Feature Module Structure

Each feature module follows this internal structure:

```
FeatureName/
├── Sources/
│   ├── {Feature}Feature.swift              # Public entry point (navigation + deep links)
│   ├── {Feature}Container.swift            # Dependency composition (factories)
│   ├── Navigation/
│   │   ├── {Feature}Navigation.swift       # Navigation destinations
│   │   └── {Feature}DeepLinkHandler.swift  # Deep link handler
│   ├── Domain/
│   │   ├── Models/
│   │   │   └── {Name}.swift                # Domain models
│   │   ├── UseCases/
│   │   │   └── Get{Name}UseCase.swift      # Business logic
│   │   └── Repositories/
│   │       └── {Name}RepositoryContract.swift  # Repository contracts
│   ├── Data/
│   │   ├── DataSources/
│   │   │   ├── {Name}RemoteDataSource.swift
│   │   │   └── {Name}MemoryDataSource.swift
│   │   ├── DTOs/
│   │   │   └── {Name}DTO.swift
│   │   └── Repositories/
│   │       └── {Name}Repository.swift
│   └── Presentation/
│       ├── {Name}List/
│       │   ├── Navigator/
│       │   │   ├── {Name}ListNavigatorContract.swift
│       │   │   └── {Name}ListNavigator.swift
│       │   ├── Views/
│       │   │   └── {Name}ListView.swift
│       │   └── ViewModels/
│       │       ├── {Name}ListViewModel.swift
│       │       └── {Name}ListViewState.swift
│       └── {Name}Detail/
│           ├── Navigator/
│           │   ├── {Name}DetailNavigatorContract.swift
│           │   └── {Name}DetailNavigator.swift
│           ├── Views/
│           │   └── {Name}DetailView.swift
│           └── ViewModels/
│               ├── {Name}DetailViewModel.swift
│               └── {Name}DetailViewState.swift
├── Tests/
│   ├── Domain/
│   │   └── UseCases/
│   │       └── Get{Name}UseCaseTests.swift
│   ├── Data/
│   │   └── {Name}RepositoryTests.swift
│   ├── Presentation/
│   │   └── {Name}List/
│   │       ├── ViewModels/
│   │       │   └── {Name}ListViewModelTests.swift
│   │       └── Snapshots/
│   │           └── {Name}ListViewSnapshotTests.swift
│   ├── Feature/
│   │   └── {Feature}FeatureTests.swift     # Feature factory tests
│   ├── Stubs/
│   │   └── {Name}+Stub.swift
│   ├── Fixtures/
│   │   └── {name}.json
│   └── Mocks/
│       ├── Get{Name}UseCaseMock.swift
│       └── {Name}RepositoryMock.swift
└── Mocks/                                   # Public mocks (if needed)
    └── {Name}RepositoryMock.swift
```

---

## Presentation Layer Organization

The Presentation layer groups related Views and ViewModels by feature name:

```
Presentation/
├── CharacterDetail/            # Feature: Character detail screen
│   ├── Navigator/
│   │   ├── CharacterDetailNavigatorContract.swift
│   │   └── CharacterDetailNavigator.swift
│   ├── Views/
│   │   └── CharacterDetailView.swift
│   └── ViewModels/
│       ├── CharacterDetailViewModel.swift
│       └── CharacterDetailViewState.swift
├── CharacterList/              # Feature: Character list screen
│   ├── Navigator/
│   │   ├── CharacterListNavigatorContract.swift
│   │   └── CharacterListNavigator.swift
│   ├── Views/
│   │   └── CharacterListView.swift
│   └── ViewModels/
│       ├── CharacterListViewModel.swift
│       └── CharacterListViewState.swift
└── ...
```

**Naming conventions:**
- Folder name matches the feature (e.g., `CharacterDetail`)
- Navigator: `{Feature}Navigator.swift` and `{Feature}NavigatorContract.swift`
- View: `{Feature}View.swift`
- ViewModel: `{Feature}ViewModel.swift`
- ViewState: `{Feature}ViewState.swift`

---

## Extensions

Extensions of external framework types (Foundation, UIKit, SwiftUI, etc.) must be placed in an `Extensions/` folder.

### Location

```
Sources/
├── Extensions/
│   ├── URL+QueryItems.swift
│   ├── Date+Formatting.swift
│   └── String+Validation.swift
└── ...

Tests/
├── Extensions/
│   ├── URLSession+Mock.swift
│   ├── HTTPURLResponse+Mock.swift
│   └── URLRequest+BodyData.swift
└── ...
```

### Naming Convention

**Pattern:** `TypeName+Purpose.swift`

```swift
// URL+QueryItems.swift
extension URL {
    func appendingQueryItems(_ items: [URLQueryItem]) -> URL { ... }
}

// URLSession+Mock.swift (in Tests)
extension URLSession {
    static func mockSession() -> URLSession { ... }
}

// Date+Formatting.swift
extension Date {
    func formatted(style: DateFormatter.Style) -> String { ... }
}
```

---

## Tests Directory Structure

```
Tests/
├── Domain/
│   └── UseCases/
│       └── Get{Name}UseCaseTests.swift
├── Data/
│   ├── {Name}RepositoryTests.swift
│   └── {Name}RemoteDataSourceTests.swift
├── Presentation/
│   └── {ScreenName}/
│       ├── ViewModels/
│       │   └── {ScreenName}ViewModelTests.swift
│       └── Snapshots/
│           └── {ScreenName}ViewSnapshotTests.swift
├── Feature/
│   └── {Feature}FeatureTests.swift
├── Stubs/                        # Domain model test data
│   ├── Character+Stub.swift
│   └── Location+Stub.swift
├── Fixtures/                     # JSON fixtures for DTOs
│   ├── character.json
│   └── character_list.json
├── Mocks/                        # Internal test mocks
│   ├── Get{Name}UseCaseMock.swift
│   └── {Name}RepositoryMock.swift
└── Helpers/                      # Test utilities
    └── SnapshotStubs.swift
```

---

## Mocks Location

| Location | Visibility | Usage |
|----------|------------|-------|
| `Mocks/` (framework) | Public | Mocks used by other modules |
| `Tests/Mocks/` | Internal | Mocks only used within the test target |

```
FeatureName/
├── Mocks/                    # Public mocks ({AppName}FeatureNameMocks framework)
│   └── {Name}RepositoryMock.swift
└── Tests/
    └── Mocks/                # Internal test-only mocks
        └── {Name}DataSourceMock.swift
```

---

## Core Module

```
Libraries/Core/
├── Sources/
│   ├── AppEnvironment/
│   │   └── AppEnvironment.swift      # Base environment enum
│   ├── Feature/
│   │   ├── Feature.swift             # Feature protocol
│   │   └── View+FeatureNavigation.swift  # withNavigationDestinations extension
│   ├── Navigation/
│   │   ├── Router.swift
│   │   ├── RouterContract.swift
│   │   ├── Navigation.swift
│   │   ├── DeepLinkHandler.swift
│   │   └── DeepLinkRegistry.swift
│   ├── ImageLoader/
│   │   ├── ImageLoaderContract.swift
│   │   ├── CachedImageLoader.swift
│   │   └── ImageLoaderEnvironment.swift
│   └── Extensions/
│       └── ...
├── Tests/
│   ├── AppEnvironment/
│   │   └── AppEnvironmentTests.swift
│   └── ...
└── Mocks/
    ├── RouterMock.swift
    ├── ImageLoaderMock.swift
    └── Bundle+JSON.swift
```

---

## Networking Module

```
Libraries/Networking/
├── Sources/
│   ├── HTTPClient.swift
│   ├── HTTPClientContract.swift
│   ├── Endpoint.swift
│   ├── HTTPMethod.swift
│   └── HTTPError.swift
├── Tests/
└── Mocks/
    └── HTTPClientMock.swift
```

---

## Shared Directory

The `Shared/` directory contains app-specific modules (not reusable across apps).

### Resources Module

```
Shared/Resources/
├── Sources/
│   ├── Extensions/
│   │   ├── Bundle+Module.swift       # Manual Bundle.module accessor
│   │   └── String+Localized.swift    # localized() extension
│   └── Resources/
│       └── Localizable.xcstrings
└── Tests/
```

The Resources module provides:
- **Localization**: Centralized `Localizable.xcstrings` and `String.localized()` extension
- **Bundle.module**: Manual accessor (Tuist generation disabled)

**Note:** Modules needing `Bundle.module` must include their own `Bundle+Module.swift`.

---

## Derived Directory

Tuist generates files in `Derived/` (gitignored):

```
Derived/
└── InfoPlists/
    ├── {AppName}-Info.plist
    ├── {AppName}Core-Info.plist
    ├── {AppName}Resources-Info.plist
    ├── {AppName}{Feature}-Info.plist
    └── ...
```

**Contents:** Only `Info.plist` files for each target.

**No generated Swift code:** `disableBundleAccessors` and `disableSynthesizedResourceAccessors` are enabled in `Project.swift`.

---

## App Directory

```
App/
├── Sources/
│   ├── {AppName}App.swift        # Minimal entry point (creates AppContainer)
│   ├── AppContainer.swift        # Composition Root (centralized DI)
│   ├── Data/
│   │   └── AppEnvironment+API.swift  # API configuration extension
│   ├── Presentation/
│   │   └── Views/
│   │       └── RootView.swift    # Root view with navigation
│   └── Resources/
│       └── Assets.xcassets/
│           ├── AppIcon.appiconset/        # Production icon
│           ├── AppIconDev.appiconset/     # Development icon
│           └── AppIconStaging.appiconset/ # Staging icon
├── Tests/                        # Unit tests for App target
│   └── Data/
│       └── AppEnvironment+APITests.swift
└── E2ETests/                     # End-to-end UI tests
    ├── Robots/
    └── Tests/
```

---

## File Naming Summary

| Component | Naming Pattern | Example |
|-----------|----------------|---------|
| Feature folder | `{Name}/` | `Character/` |
| Public entry | `{Feature}Feature.swift` | `CharacterFeature.swift` |
| Container | `{Feature}Container.swift` | `CharacterContainer.swift` |
| Navigation | `Navigation/{Feature}Navigation.swift` | `Navigation/CharacterNavigation.swift` |
| Domain model | `{Name}.swift` | `Character.swift` |
| DTO | `{Name}DTO.swift` | `CharacterDTO.swift` |
| UseCase | `{Action}{Name}UseCase.swift` | `GetCharacterUseCase.swift` |
| Repository | `{Name}Repository.swift` | `CharacterRepository.swift` |
| Contract | `{Name}Contract.swift` | `CharacterRepositoryContract.swift` |
| DataSource | `{Name}{Type}DataSource.swift` | `CharacterRemoteDataSource.swift` |
| Navigator | `{ScreenName}Navigator.swift` | `CharacterDetailNavigator.swift` |
| NavigatorContract | `{ScreenName}NavigatorContract.swift` | `CharacterDetailNavigatorContract.swift` |
| View | `{ScreenName}View.swift` | `CharacterDetailView.swift` |
| ViewModel | `{ScreenName}ViewModel.swift` | `CharacterDetailViewModel.swift` |
| ViewState | `{ScreenName}ViewState.swift` | `CharacterDetailViewState.swift` |
| Test | `{Component}Tests.swift` | `CharacterRepositoryTests.swift` |
| Feature Test | `{Feature}FeatureTests.swift` | `CharacterFeatureTests.swift` |
| Stub | `{Name}+Stub.swift` | `Character+Stub.swift` |
| Mock | `{Name}Mock.swift` | `CharacterRepositoryMock.swift` |
| Extension | `{Type}+{Purpose}.swift` | `URL+QueryItems.swift` |
| Bundle accessor | `Bundle+Module.swift` | `Bundle+Module.swift` |
| JSON fixture | `{name}.json` | `character.json` |

---

## Checklist

- [ ] AppContainer.swift in App/Sources/ as Composition Root
- [ ] Feature folder does not contain "Feature" suffix
- [ ] {Feature}Container.swift for dependency composition
- [ ] {Feature}Feature.swift as public entry point
- [ ] Sources organized by layer: Domain, Data, Presentation
- [ ] Presentation organized by screen: {ScreenName}/Navigator/, {ScreenName}/Views/, {ScreenName}/ViewModels/
- [ ] Tests mirror Sources structure
- [ ] Feature tests in Tests/Feature/
- [ ] Extensions in dedicated `Extensions/` folder
- [ ] Extension files named `{Type}+{Purpose}.swift`
- [ ] Mocks in correct location (Tests/Mocks/ vs Mocks/)
- [ ] Stubs in Tests/Stubs/
- [ ] JSON fixtures in Tests/Fixtures/
- [ ] If module needs `Bundle.module`, include `Bundle+Module.swift`
